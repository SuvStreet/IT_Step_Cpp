Конструктор  копирования
===

Виды конструкторов
---

1. Конструктор по умолчанию
2. Конструктор с параметрами:
    * явный (неконвертирующий) 
    * конвертирующий
3. Делегирующий конструктор (С++11)
4. Копирующий конструктор
5. Конструктор перемещения (С++11)

Копирующий конструктор
---
      
* имеет один аргумент (ссылка на объект класса)
* нужен для копирования объектов класса
* может генерироваться автоматически
* копирующий конструктор по умолчанию делает побитовую копию объекта
* вызывается всегда, когда создается копия

```cpp
Х(const X& myObj); // где X – имя класса
```

Когда нужен копирующий конструктор?
---
      
1. Передача объекта в функцию
    * при передаче объекта в функцию создается новый объект
    * при выходе из функции временный объект разрушается (вызывается деструктор копии)

```cpp
void f (X obj) { ... }
...
X myObj;
f(myObj);
```

2. Возврат объекта из функции
    * при возвращении объекта создается копия, которая потом разрушается

```cpp
X f () { 
  X myObj;
  return  myObj;
}
...
X res = f();
```

3. Инициализация одного объекта другим при создании (используется оператор =)

```cpp
X myObj;

// побитовое копирование
X myNewObj = myObj;
```

Копирующий конструктор: пример
---

```cpp
class Array {
  int* p;
  int size;
public:
  Array(int sz) : size(sz) {
    p = new int[sz];
    }
  ~Array() { delete [] p; }
  Array(const Array &a) : size(a.size) {
    p = new int[size];
    for(int i = 0; i < a.size; ++i) { p[i] = a.p[i]; }
  }
};
```

Копирующий конструктор
---

__Если в классе есть конструктор копирования, то в классе нужно реализовать деструктор.__

**29.05.2017**
